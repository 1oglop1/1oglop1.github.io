
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Python modules and packages &#8212; Python Workshops 0.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Python shells" href="../python-shells/README.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    
     

  </head><body>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../python-shells/README.html" title="Python shells"
             accesskey="P">previous</a> |</li>
    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    
    <a href="../index.html">Python Workshops 0.1.0 documentation</a> &#187;
    

    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="python-modules-and-packages">
<h1>Python modules and packages<a class="headerlink" href="#python-modules-and-packages" title="Permalink to this headline">¶</a></h1>
<p>In this lab we will create simple python module and package.
Purpose of this lab is to show how you can structure your project and learn the basics of import logic.
The lab is expecting you to be familiar with your <code class="docutils literal notranslate"><span class="pre">terminal</span></code> and do basic operations.</p>
<p>Tasks will take you through several levels of working with modules and packages.</p>
<ul class="simple">
<li><a class="reference internal" href="#level-1">Level 1</a> - Create simple python module</li>
<li><a class="reference internal" href="#level-2">Level 2</a> - Create simple package and use it in external module</li>
<li><a class="reference internal" href="#level-3">Level 3</a> - Create installable package and use it within virtual environment</li>
</ul>
<p>Every level should be in it’s own directory where our root directory will be <code class="docutils literal notranslate"><span class="pre">code</span></code>.
And our lab structure will look like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>code
├── level_1
├── level_2
├── level_3
└── level_4..5...etc
</pre></div>
</div>
<p>Modules and package we crate will contain simple caesar cipher encoder and decoder.
Principle of <a class="reference external" href="https://en.wikipedia.org/wiki/Caesar_cipher">Caesar Cipher</a> is to replace every letter in message with another letter at given position <code class="docutils literal notranslate"><span class="pre">n</span></code>.</p>
<p>Example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Message: alphabet
Shift: 3
Cipher: doskdehw
</pre></div>
</div>
<p><em>Note</em>: Caesar could use only alphabet during his time, however with python we are using space of entire <a class="reference external" href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a>,
so you can shift by many more characters and produce non alphanumeric text. On the top of that python is case sensitive
which means that position of <code class="docutils literal notranslate"><span class="pre">A</span></code> is not the same as positon of <code class="docutils literal notranslate"><span class="pre">a</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
<span class="c1"># 65</span>

<span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="c1"># 97</span>
</pre></div>
</div>
<p>You can find all codes in directory <code class="docutils literal notranslate"><span class="pre">resources/code</span></code></p>
<div class="section" id="level-1">
<span id="id1"></span><h2>Level 1<a class="headerlink" href="#level-1" title="Permalink to this headline">¶</a></h2>
<p>Python module is a single <code class="docutils literal notranslate"><span class="pre">.py</span></code> file. Module can be executed as a script or called from another module.</p>
<p>We are going to create simple python module <code class="docutils literal notranslate"><span class="pre">caesar.py</span></code> and execute it.</p>
<p>Final structure of the code</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>level_1
├── caesar.py
└── use_it.py
</pre></div>
</div>
<ol class="arabic">
<li><p class="first">Create new directory: <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">level_1</span></code></p>
</li>
<li><p class="first">Go to the directory <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">level_1</span></code></p>
</li>
<li><p class="first">Create new python file: <code class="docutils literal notranslate"><span class="pre">caesar.py</span></code></p>
</li>
<li><p class="first">Open the file in your favorite text editor</p>
</li>
<li><p class="first">Function for encoding into Caesar cipher looks like this</p>
<ul class="simple">
<li>You can copy paste the code into the file</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="n">shift</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encodes text with caesar cipher.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    shift</span>
<span class="sd">        Number of characters to shift.</span>

<span class="sd">    text</span>
<span class="sd">        Text to encode</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Text shifted by shift characters.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">shifted_numbers</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">char</span><span class="p">:</span> <span class="nb">ord</span><span class="p">(</span><span class="n">char</span><span class="p">)</span> <span class="o">+</span> <span class="n">shift</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">num</span><span class="p">:</span> <span class="nb">chr</span><span class="p">(</span><span class="n">num</span><span class="p">),</span> <span class="n">shifted_numbers</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p class="first">To test your code simply add following few lines under the function</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Your secret text.&quot;</span>
    <span class="n">cipher</span> <span class="o">=</span> <span class="n">encode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">cipher</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Save the file</p>
</li>
<li><p class="first">And run the code with command <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">caesar.py</span></code></p>
<ul class="simple">
<li>if everything went well the output should look like this.</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>]syv$wigvix$xi|x2
</pre></div>
</div>
</li>
<li><p class="first">Let’s add decode function to our code and test if it works.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="n">shift</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encodes text with caesar cipher.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    shift</span>
<span class="sd">        Number of characters to shift.</span>

<span class="sd">    text</span>
<span class="sd">        Text to encode</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Text shifted by shift characters.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">shifted_numbers</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">char</span><span class="p">:</span> <span class="nb">ord</span><span class="p">(</span><span class="n">char</span><span class="p">)</span> <span class="o">+</span> <span class="n">shift</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">num</span><span class="p">:</span> <span class="nb">chr</span><span class="p">(</span><span class="n">num</span><span class="p">),</span> <span class="n">shifted_numbers</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="n">shift</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decodes caesar cipher.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    shift</span>
<span class="sd">        Number of characters to shift.</span>

<span class="sd">    text</span>
<span class="sd">        Text to decode</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Decoded text.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">shifted_numbers</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">char</span><span class="p">:</span> <span class="nb">ord</span><span class="p">(</span><span class="n">char</span><span class="p">)</span> <span class="o">-</span> <span class="n">shift</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">num</span><span class="p">:</span> <span class="nb">chr</span><span class="p">(</span><span class="n">num</span><span class="p">),</span> <span class="n">shifted_numbers</span><span class="p">))</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Your secret text.&quot;</span>
    <span class="n">cipher</span> <span class="o">=</span> <span class="n">encode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
    <span class="c1"># use encoded message as input</span>
    <span class="n">decoded</span> <span class="o">=</span> <span class="n">decode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">cipher</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Oridignal message: {message}&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Encoded message: {cipher}&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Decoded message: {decoded}&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Save the file and run our code again <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">caesar.py</span></code></p>
<ul class="simple">
<li>The output should looks like this:</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Oridignal message: Your secret text.
Encoded message: ]syv$wigvix$xi|x2
Decoded message: Your secret text.
</pre></div>
</div>
</li>
</ol>
<p>We have successfully created executable python module.</p>
<p>Let’s try to use our module from another module</p>
<ol class="arabic">
<li><p class="first">Create new file: <code class="docutils literal notranslate"><span class="pre">use_it.py</span></code> in the same directory as <code class="docutils literal notranslate"><span class="pre">caesar.py</span></code></p>
</li>
<li><p class="first">Insert the following code:</p>
<ul class="simple">
<li>To use another module, use the the keyword <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">&lt;module_name&gt;</span></code>.</li>
<li>Then you can use the functions with dot notation <code class="docutils literal notranslate"><span class="pre">module.function()</span></code></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">caesar</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;We call the caesar module!&quot;</span>
    <span class="n">cipher</span> <span class="o">=</span> <span class="n">caesar</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
    <span class="c1"># use encoded message as input</span>
    <span class="n">decoded</span> <span class="o">=</span> <span class="n">caesar</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">cipher</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Oridignal message: {message}&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Encoded message: {cipher}&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Decoded message: {decoded}&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Save the file and run it <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">use_it.py</span></code></p>
<ul class="simple">
<li>Output should look like this:</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Oridignal message: We call the caesar module!
Encoded message: [i$gepp$xli$geiwev$qshypi%
Decoded message: We call the caesar module!
</pre></div>
</div>
</li>
</ol>
<p>You may noticed that did not execute all code from <code class="docutils literal notranslate"><span class="pre">caesar.py</span></code> in <code class="docutils literal notranslate"><span class="pre">use_it.py</span></code>.</p>
<p>This is because of the condition <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__'</span></code>, to check the python documentation to learn more about <a class="reference external" href="https://docs.python.org/3/library/__main__.html">__main__</a>.</p>
</div>
<div class="section" id="level-2">
<span id="id2"></span><h2>Level 2<a class="headerlink" href="#level-2" title="Permalink to this headline">¶</a></h2>
<p>In this level we will reuse our <code class="docutils literal notranslate"><span class="pre">caesar.py</span></code> from previous task to create python and create python package.
The package usually contains multiple modules, so we will create our package named <code class="docutils literal notranslate"><span class="pre">ciphers</span></code>.</p>
<p>Once we have our package in place we can start importing modules from it.
We are going to try very simple case with just one module, so you can add more modules later on if you wish.</p>
<p>Don’t forget to check the <a class="reference external" href="https://docs.python.org/3/reference/import.html">python import system documentation</a> for more info.</p>
<p>Final structure of the code for level_2 task.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>level_2
├── ciphers
│   ├── __init__.py
│   └── caesar.py
├── try_me
│   └── try_me.py
└── use_it.py
</pre></div>
</div>
<p>Let’s prepare our pacakge.</p>
<ol class="arabic simple">
<li>Create directory <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">level_2</span></code></li>
<li>Go to directory <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">level_2</span></code></li>
<li>Create another directory <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">ciphers</span></code></li>
<li>Go to the directory <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">ciphers</span></code></li>
<li>Copy our <code class="docutils literal notranslate"><span class="pre">caesar.py</span></code> from <code class="docutils literal notranslate"><span class="pre">level_1</span></code> into directory <code class="docutils literal notranslate"><span class="pre">ciphers</span></code> (you can use command below):<ul>
<li>MacLinux: <code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">../../level_1/caesar.py</span> <span class="pre">.</span></code></li>
<li>Windows: <code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">..\..\level_1\caesar.py</span> <span class="pre">.</span></code></li>
</ul>
</li>
<li>Create new file <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code></li>
</ol>
<blockquote>
<div><ul class="simple">
<li>You can leave the file empty</li>
<li><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> will tell python to understand the directory as a module</li>
<li>and our <code class="docutils literal notranslate"><span class="pre">caesar.py</span></code> will become <code class="docutils literal notranslate"><span class="pre">submodule</span></code></li>
</ul>
</div></blockquote>
<p>Now that our package is ready to use, let’s use it!</p>
<ol class="arabic">
<li><p class="first">Go back to directory <code class="docutils literal notranslate"><span class="pre">level_2</span></code>: <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">..</span></code></p>
</li>
<li><p class="first">Create new file <code class="docutils literal notranslate"><span class="pre">use_it.py</span></code></p>
<ul class="simple">
<li>We are going to use our package from here</li>
</ul>
</li>
<li><p class="first">Open the file <code class="docutils literal notranslate"><span class="pre">use_it.py</span></code> in your favorite text editor</p>
</li>
<li><p class="first">And insert following code and save the file</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ciphers</span> <span class="kn">import</span> <span class="n">caesar</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;I&#39;m using ciphers package&quot;</span>

    <span class="n">encoded</span> <span class="o">=</span> <span class="n">caesar</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

    <span class="c1"># use encoded message as input</span>
    <span class="n">decoded</span> <span class="o">=</span> <span class="n">caesar</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">encoded</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Oridignal message: {message}&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Encoded message: {encoded}&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Decoded message: {decoded}&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Run the code: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">use_it.py</span></code></p>
<ul class="simple">
<li>Expected output:</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Oridignal message: I&#39;m using ciphers package
Encoded message: M+q$ywmrk$gmtlivw$tegoeki
Decoded message: I&#39;m using ciphers package
</pre></div>
</div>
</li>
</ol>
<p>Now imagine we would like to use our from within another project.
But it won’t be that easy as it looks like. Try it with the steps below.</p>
<ol class="arabic">
<li><p class="first">Create new directory <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">try_me</span></code></p>
</li>
<li><p class="first">Go to the directory <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">try_me</span></code></p>
</li>
<li><p class="first">Create new file <code class="docutils literal notranslate"><span class="pre">try_me.py</span></code></p>
</li>
<li><p class="first">Insert the similar code as before:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ciphers</span> <span class="kn">import</span> <span class="n">caesar</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;I&#39;m trying to use ciphers package&quot;</span>

    <span class="n">encoded</span> <span class="o">=</span> <span class="n">caesar</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

    <span class="c1"># use encoded message as input</span>
    <span class="n">decoded</span> <span class="o">=</span> <span class="n">caesar</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">encoded</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Oridignal message: {message}&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Encoded message: {encoded}&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Decoded message: {decoded}&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Instead of printing the output, we got an error</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;try_me.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="kn">from</span> <span class="nn">ciphers</span> <span class="kn">import</span> <span class="n">caesar</span>
<span class="n">ModuleNotFoundError</span><span class="p">:</span> <span class="n">No</span> <span class="n">module</span> <span class="n">named</span> <span class="s1">&#39;ciphers&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li>As you can see python throws <code class="docutils literal notranslate"><span class="pre">ModuleNotFoundError</span></code> exception.
Python is searching for modules in <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> and it does not containe path to the directory <code class="docutils literal notranslate"><span class="pre">level_2/ciphers</span></code>.</li>
<li>The easiest way to fix this is to make your module installable in level_3 task.</li>
<li>Check documentation for more information about <a class="reference external" href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH">PYTHONPATH</a> and <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path">sys.path</a></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="level-3">
<span id="id3"></span><h2>Level 3<a class="headerlink" href="#level-3" title="Permalink to this headline">¶</a></h2>
<p>This task will take us to completely different level where we create installable package.</p>
<p>This lab will be similar to <a class="reference external" href="http://python-packaging.readthedocs.io/en/latest/index.html">official packaging guide</a>.
Once your package is finished you can <a class="reference external" href="https://packaging.python.org/tutorials/distributing-packages/#requirements-for-packaging-and-distributing">distribute it to PyPI</a> (currently out of scope of this lab)</p>
<p>We will need to modify our structure a bit so in the end it will look like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>level_3
├── app_1
│   ├── Pipfile
│   ├── Pipfile.lock
│   └── main.py
└── ciphers_project
    ├── MANIFEST.in
    ├── README.rst
    ├── ciphers
    │   ├── __init__.py
    │   ├── __version__.py
    │   └── caesar.py
    └── setup.py
</pre></div>
</div>
<p>Let’s start:</p>
<ol class="arabic">
<li><p class="first">Create a directory <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">level_3</span></code></p>
</li>
<li><p class="first">Go to the directory <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">level_3</span></code></p>
</li>
<li><p class="first">Create another directory <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">ciphers_project</span></code></p>
<ul class="simple">
<li>This is an umbrella directory for entire project, it will contain our package + necessary files to produce installable package</li>
</ul>
</li>
<li><p class="first">Go to the project directory <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">ciphers_project</span></code></p>
</li>
<li><p class="first">Copy our package from <a class="reference internal" href="#level-2">level_2</a>: <code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">-r</span> <span class="pre">../../level_2/ciphers</span> <span class="pre">.</span></code></p>
<ul class="simple">
<li>If you do not have the code from previous level, go to the <code class="docutils literal notranslate"><span class="pre">resources/level2</span></code> and copy <code class="docutils literal notranslate"><span class="pre">ciphers</span></code> directory.</li>
</ul>
</li>
<li><p class="first">Let’s create <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file is an entrypoint where we specify package metadata and other requirements</li>
<li>For more information check <a class="reference internal" href="#references">references</a> and <a class="reference external" href="http://setuptools.readthedocs.io/en/latest/setuptools.html">setuptools</a> documentation.</li>
</ul>
</li>
<li><p class="first">Open <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> in your favorite editor and write following code:</p>
<ul class="simple">
<li>Adjust valuies of <code class="docutils literal notranslate"><span class="pre">EMAIL</span></code> and <code class="docutils literal notranslate"><span class="pre">AUTHOR</span></code> to your name and email.</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">NAME</span> <span class="o">=</span> <span class="s2">&quot;ciphers&quot;</span>
<span class="n">DESCRIPTION</span> <span class="o">=</span> <span class="s2">&quot;Example package providing ciphers.&quot;</span>
<span class="n">URL</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">EMAIL</span> <span class="o">=</span> <span class="s2">&quot;1oglop1@gmail.com&quot;</span>
<span class="n">AUTHOR</span> <span class="o">=</span> <span class="s2">&quot;Jan Gazda&quot;</span>
<span class="n">REQUIRES_PYTHON</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.6.0&quot;</span>
<span class="n">VERSION</span> <span class="o">=</span> <span class="s2">&quot;0.1.0&quot;</span>

<span class="c1"># What packages are required for this module to be executed?</span>
<span class="n">REQUIRED</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># &#39;requests&#39;, &#39;maya&#39;, &#39;records&#39;,</span>
<span class="p">]</span>

<span class="c1"># The rest you shouldn&#39;t have to touch too much :)</span>
<span class="c1"># ------------------------------------------------</span>
<span class="c1"># Except, perhaps the License and Trove Classifiers!</span>
<span class="c1"># If you do change the License, remember to change the Trove Classifier for that!</span>

<span class="n">here</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>

<span class="c1"># Import the README and use it as the long-description.</span>
<span class="c1"># Note: this will only work if &#39;README.rst&#39; is present in your MANIFEST.in file!</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">here</span><span class="p">,</span> <span class="s2">&quot;README.rst&quot;</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">long_description</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="n">NAME</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="n">VERSION</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="n">DESCRIPTION</span><span class="p">,</span>
    <span class="n">long_description</span><span class="o">=</span><span class="n">LONG_DESCRIPTION</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="n">AUTHOR</span><span class="p">,</span>
    <span class="n">author_email</span><span class="o">=</span><span class="n">EMAIL</span><span class="p">,</span>
    <span class="n">python_requires</span><span class="o">=</span><span class="n">REQUIRES_PYTHON</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="n">URL</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(</span> <span class="n">exclude</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;tests&quot;</span><span class="p">,)),</span>
    <span class="c1"># entry_points={</span>
    <span class="c1">#     &#39;console_scripts&#39;: [</span>
    <span class="c1">#         # &#39;mycli=mymodule:cli&#39;,</span>
    <span class="c1">#     ],</span>
    <span class="c1"># },</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="n">REQUIRED</span><span class="p">,</span>
    <span class="n">include_package_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">license</span><span class="o">=</span><span class="s1">&#39;MIT&#39;</span><span class="p">,</span>
    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
        <span class="c1"># Trove classifiers</span>
        <span class="c1"># Full list: https://pypi.python.org/pypi?%3Aaction=list_classifiers</span>
        <span class="s2">&quot;License :: OSI Approved :: MIT License&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Programming Language :: Python&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Programming Language :: Python :: 3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Programming Language :: Python :: 3.6&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Programming Language :: Python :: Implementation :: CPython&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Programming Language :: Python :: Implementation :: PyPy&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Create another file <code class="docutils literal notranslate"><span class="pre">README.RST</span></code> and open it in your favorite editor.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">README.rst</span></code> - All projects should contain a readme file that covers the goal of the project.</li>
<li>Feel free to use my example:</li>
</ul>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="gh">===============</span>
<span class="gh">Ciphers package</span>
<span class="gh">===============</span>


This is an awesome package providing various ciphers.
</pre></div>
</div>
</li>
<li><p class="first">Save the file <code class="docutils literal notranslate"><span class="pre">README.rst</span></code></p>
</li>
<li><p class="first">Create another file <code class="docutils literal notranslate"><span class="pre">MANIFEST.in</span></code></p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">MANIFEST.in</span></code> - needed when you need to package additional files that are not automatically included in a source distribution.</li>
<li>type following into the file and save it.</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>include README.rst
</pre></div>
</div>
</li>
</ol>
<p>We have just made necessary preparations to create installable package. The structure of the project should look like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ciphers_project
├── MANIFEST.in
├── README.rst
├── ciphers
│   ├── __init__.py
│   ├── __version__.py
│   └── caesar.py
└── setup.py
</pre></div>
</div>
<p>We are going to do two things:</p>
<ul class="simple">
<li>install our package into separate virtual environment.</li>
<li>Build portable installer <code class="docutils literal notranslate"><span class="pre">wheel</span></code></li>
</ul>
<div class="section" id="installing-the-package-in-virtual-environment">
<h3>Installing the package in virtual environment.<a class="headerlink" href="#installing-the-package-in-virtual-environment" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Go to the task directory <code class="docutils literal notranslate"><span class="pre">level_3</span></code></p>
<ul class="simple">
<li>if you have followed all steps you should be able to use <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">..</span></code></li>
</ul>
</li>
<li><p class="first">Create new directory <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">app_1</span></code></p>
</li>
<li><p class="first">Go to the directory <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">app_1</span></code></p>
</li>
<li><p class="first">Install our package using pipenv: <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">install</span> <span class="pre">../ciphers_projectpip</span></code></p>
</li>
<li><p class="first">Verify package was correctly installed: <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">graph</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ciphers==0.1.0
</pre></div>
</div>
</li>
</ol>
<p>Let’s use the package we have just installed.</p>
<ol class="arabic">
<li><p class="first">Create new file <code class="docutils literal notranslate"><span class="pre">app_1.py</span></code> and open it in your favorite text editor.</p>
</li>
<li><p class="first">Insert following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ciphers</span>
<span class="kn">from</span> <span class="nn">ciphers</span> <span class="kn">import</span> <span class="n">caesar</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;We are using package ciphers loaded from&quot;</span><span class="p">,</span> <span class="n">ciphers</span><span class="p">)</span>

    <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Hello World!&quot;</span>

    <span class="n">encoded</span> <span class="o">=</span> <span class="n">caesar</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

    <span class="c1"># use encoded message as input</span>
    <span class="n">decoded</span> <span class="o">=</span> <span class="n">caesar</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">encoded</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Oridignal message: {message}&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Encoded message: {encoded}&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Decoded message: {decoded}&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Run the code: <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">run</span> <span class="pre">python</span> <span class="pre">app_1.py</span></code></p>
<ul class="simple">
<li>Desired output:</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>We are using package ciphers located at: &lt;module &#39;ciphers&#39; from &#39;/Users/user/.virtualenvs/app_1-2aSkwHkG/lib/python3.6/site-packages/ciphers/__init__.py&#39;&gt;
Oridignal message: Hello World!
Encoded message: Lipps$[svph%
Decoded message: Hello World!
</pre></div>
</div>
</li>
</ol>
<p>Okay we have learned that we can install package from it’s directory.
But we can also build an installer and share it with your friends.</p>
</div>
<div class="section" id="building-wheel">
<h3>Building wheel<a class="headerlink" href="#building-wheel" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://pythonwheels.com">Wheel</a> A wheel is a ZIP-format archive with a specially formatted file name and the .whl extension.
You can then distribute this archive and share your python packages.
<a class="reference external" href="https://www.python.org/dev/peps/pep-0427/">PEP 427 – The Wheel Binary Package Format 1.0</a></p>
<p>We are going to use <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> to build the wheel.</p>
<ol class="arabic">
<li><p class="first">Go to the project folder <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">ciphers_project</span></code></p>
</li>
<li><p class="first">And type: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">bdist_wheel</span></code></p>
<ul class="simple">
<li>If everything went well, command created new folders in our project</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ciphers_project
├── build
│   ├── bdist.macosx-10.6-intel
│   └── lib
│       └── ciphers
│           ├── __init__.py
│           └── caesar.py
├── ciphers.egg-info
│   ├── PKG-INFO
│   ├── SOURCES.txt
│   ├── dependency_links.txt
│   └── top_level.txt
├── dist
│   └── ciphers-0.1.0-py3-none-any.whl
└── setup.py
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">build</span></code> - This is were our package is being build</li>
<li><code class="docutils literal notranslate"><span class="pre">ciphers.egg-info</span></code> - <code class="docutils literal notranslate"><span class="pre">egg-info</span></code> directory contains Python egg metadata, regenerated from source files by setuptools.</li>
<li><code class="docutils literal notranslate"><span class="pre">dist</span></code> - Setuptools distribution folder. Is the directory where we can find our wheel.</li>
<li>All data from directories above were automatically generated and you can safely remove and exclude them from VCS.</li>
<li>For more info about building also check: <a class="reference external" href="https://docs.python.org/3.6/install/#how-building-works">https://docs.python.org/3.6/install/#how-building-works</a></li>
</ul>
</li>
</ol>
<p>You can now distribute this wheel to your friends, customer or publish it to PyPI.</p>
</div>
</div>
<div class="section" id="references">
<span id="id4"></span><h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Caesar_cipher">Caesar cipher wiki</a></li>
<li><a class="reference external" href="https://docs.python.org/3/reference/import.html">Import documentation</a></li>
<li><a class="reference external" href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH">PYTHONPATH</a> and <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path">Sys path</a></li>
<li><a class="reference external" href="https://packaging.python.org/tutorials/distributing-packages/#requirements-for-packaging-and-distributing">Package distribution</a></li>
<li><a class="reference external" href="http://python-packaging.readthedocs.io/en/latest/index.html">Packaging guide</a></li>
<li><a class="reference external" href="http://setuptools.readthedocs.io/en/latest/setuptools.html">Setuptools</a></li>
<li><a class="reference external" href="https://pythonwheels.com">Python wheels</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Python modules and packages</a><ul>
<li><a class="reference internal" href="#level-1">Level 1</a></li>
<li><a class="reference internal" href="#level-2">Level 2</a></li>
<li><a class="reference internal" href="#level-3">Level 3</a><ul>
<li><a class="reference internal" href="#installing-the-package-in-virtual-environment">Installing the package in virtual environment.</a></li>
<li><a class="reference internal" href="#building-wheel">Building wheel</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../python-shells/README.html"
                        title="previous chapter">Python shells</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/modules-packages-1/README.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../python-shells/README.html" title="Python shells"
             >previous</a> |</li>
    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    
    <a href="../index.html">Python Workshops 0.1.0 documentation</a> &#187;
    

    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2018, Jan Gazda.
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Last updated on None.
    
    <br />

    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.7.2.
    </div>

  </body>
</html>