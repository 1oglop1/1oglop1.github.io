
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Virtual environments &#8212; Python Workshops 0.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Python shells" href="../python-shells/README.html" />
    <link rel="prev" title="pip Lab" href="../pip-lab/README.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    
     

  </head><body>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../python-shells/README.html" title="Python shells"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../pip-lab/README.html" title="pip Lab"
             accesskey="P">previous</a> |</li>
    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    
    <a href="../index.html">Python Workshops 0.1.0 documentation</a> &#187;
    

    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="virtual-environments">
<h1>Virtual environments<a class="headerlink" href="#virtual-environments" title="Permalink to this headline">¬∂</a></h1>
<p>This lab will introduce you to the basiscs of python virtual environments.
We will cover few tools for management of virtual environments.
Once you finish the lab, you will be able to pick one which suites you best.
This lab expect you to have <code class="docutils literal notranslate"><span class="pre">python3</span></code> as your primary <code class="docutils literal notranslate"><span class="pre">python</span></code>.</p>
<div class="section" id="venv">
<h2>venv<a class="headerlink" href="#venv" title="Permalink to this headline">¬∂</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">venv</span></code> is a module from python standard library and it‚Äôs usage does not require any 3rd party packages.
In case you miss something, check the <a class="reference internal" href="#references">References</a> section for the documentation.</p>
<ol class="arabic">
<li><p class="first">Open the terminal emulator</p>
<ul class="simple">
<li>Mac OSx: hit <code class="docutils literal notranslate"><span class="pre">[CMD]+[Space]</span></code> and type <code class="docutils literal notranslate"><span class="pre">terminal.app</span></code></li>
<li>Windows: hit <code class="docutils literal notranslate"><span class="pre">[WIN-key]+[R]</span></code> and type <code class="docutils literal notranslate"><span class="pre">powershell</span></code> (or you can search for <code class="docutils literal notranslate"><span class="pre">powershell</span></code> in start menu.</li>
</ul>
</li>
<li><p class="first">Create new directory <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">venv_taks</span></code></p>
</li>
<li><p class="first">Go into directory you created <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">venv_taks</span></code></p>
</li>
<li><p class="first">Let‚Äôs create a virtual environment <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">venv</span> <span class="pre">.venv</span></code></p>
<ul class="simple">
<li>Command above has created completely separate python environment in <code class="docutils literal notranslate"><span class="pre">.venv</span></code> directory</li>
</ul>
</li>
<li><p class="first">Activate virtual environment</p>
<ul class="simple">
<li>Mac/Linux: <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">.venv/bin/activate</span></code> - <code class="docutils literal notranslate"><span class="pre">activate</span></code> in case you do not use default <code class="docutils literal notranslate"><span class="pre">BASH</span></code> check for correct <code class="docutils literal notranslate"><span class="pre">activate</span></code></li>
<li>Windows: <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">.venv\Scripts\Activate.ps1</span></code><ul>
<li>If command above did not work, you might need to relax execution policy with command <code class="docutils literal notranslate"><span class="pre">Set-ExecutionPolicy</span> <span class="pre">Undefined</span> <span class="pre">-Scope</span> <span class="pre">CurrentUser</span></code></li>
</ul>
</li>
</ul>
</li>
<li><p class="first">Now that we have activated the virtual virtual environment you should see <code class="docutils literal notranslate"><span class="pre">(.venv)</span></code> as a prefix in your prompt.</p>
<ul class="simple">
<li>Mac/Linux: <code class="docutils literal notranslate"><span class="pre">(.venv)</span> <span class="pre">user&#64;machine:</span> <span class="pre">&lt;path</span> <span class="pre">to</span> <span class="pre">task_venv&gt;</span></code></li>
<li>Windows: <code class="docutils literal notranslate"><span class="pre">(.venv)PS</span> <span class="pre">C:\&lt;path</span> <span class="pre">to</span> <span class="pre">task_venv&gt;</span></code></li>
</ul>
</li>
<li><p class="first">Let see what is different</p>
<ol class="arabic">
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">venv</span></code> set environment variable <code class="docutils literal notranslate"><span class="pre">VIRTUAL_ENV</span></code> with the location of <code class="docutils literal notranslate"><span class="pre">.venv</span></code> directory,
use the command below to see the value of this variable</p>
<ul class="simple">
<li>Mac/Linux: <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$VIRTUAL_ENV</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/Users/user/venv_task/.venv
</pre></div>
</div>
<ul class="simple">
<li>Windows: <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$env:VIRTUAL_ENV</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>C:\Users\user\venv_task\.venv
</pre></div>
</div>
</li>
<li><p class="first">Check that we are using <code class="docutils literal notranslate"><span class="pre">pip</span></code> and <code class="docutils literal notranslate"><span class="pre">python</span></code> directly from virtual environment,
note that the output should contain same root path as value of <code class="docutils literal notranslate"><span class="pre">$VIRTUAL_ENV</span></code>.
Try the commands below and examine the output.</p>
<ul class="simple">
<li>Mac/Linux: <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">pip</span></code>, <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">python</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/Users/user/venv_task/.venv/bin/pip
/Users/user/venv_task/.venv/bin/python
</pre></div>
</div>
<ul class="simple">
<li>Windows: <code class="docutils literal notranslate"><span class="pre">gcm</span> <span class="pre">pip</span></code>, <code class="docutils literal notranslate"><span class="pre">gcm</span> <span class="pre">python</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(.venv)PS C:\Users\user\venv_task\.venv&gt; gcm python

CommandType     Name                                               Version    Source
-----------     ----                                               -------    ------
Application     python.exe                                         3.6.315... C:\Users\user\venv_task\.venv\Scripts\python.exe

(.venv)PS C:\Users\user\venv_task\.venv&gt; gcm pip

CommandType     Name                                               Version    Source
-----------     ----                                               -------    ------
Application     pip.exe                                            0.0.0.0    C:\Users\user\venv_task\.venv\Scripts\pip.exe
</pre></div>
</div>
</li>
</ol>
</li>
<li><p class="first">Let‚Äôs install <code class="docutils literal notranslate"><span class="pre">html5lib</span></code> into your virtual environment</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">html5lib==0.9999</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">list</span></code> to show installed packages</li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>html5lib (0.9999)
pip (9.0.3)
setuptools (39.0.1)
six (1.11.0)
webencodings (0.5.1)
wheel (0.31.0)
</pre></div>
</div>
</li>
<li><p class="first">To exit <code class="docutils literal notranslate"><span class="pre">venv</span></code> type command: <code class="docutils literal notranslate"><span class="pre">deactivate</span></code></p>
</li>
<li><p class="first">If you list packages now <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">list</span></code>, you will notice a missing <code class="docutils literal notranslate"><span class="pre">html5lib==0.9999</span></code>, because we are listing system-wide packages.</p>
</li>
<li><p class="first">To remove the virtual environment simply remove directory <code class="docutils literal notranslate"><span class="pre">.venv</span></code></p>
</li>
</ol>
</div>
<div class="section" id="necessary-customisations-for-pipenv-and-pew">
<h2>Necessary customisations for pipenv and pew<a class="headerlink" href="#necessary-customisations-for-pipenv-and-pew" title="Permalink to this headline">¬∂</a></h2>
<p>Pipenv and pew does not have the activate file so you need to configure your shell prompt to get similar as with venv.
This lab will cover <code class="docutils literal notranslate"><span class="pre">BASH</span></code> and <code class="docutils literal notranslate"><span class="pre">powershell</span></code> prompt configuration.
Both tools set environment variable <code class="docutils literal notranslate"><span class="pre">VIRTUAL_ENV</span></code> and we will use it for customising our prompt.
In case you are using different shell please check documentation of <a class="reference external" href="https://github.com/berdario/pew">pew</a> or <a class="reference external" href="https://pipenv.readthedocs.io/en/latest/">pipenv</a></p>
<div class="section" id="bash-prompt-configuration">
<h3>BASH prompt configuration<a class="headerlink" href="#bash-prompt-configuration" title="Permalink to this headline">¬∂</a></h3>
<p>Mac OSx:
1. Open <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code> file - <code class="docutils literal notranslate"><span class="pre">open</span> <span class="pre">~/.bash_profile</span></code>
2. Add this code at the end of the file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">LC_CTYPE</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nb">export</span> <span class="nv">LC_ALL</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nb">export</span> <span class="nv">LANG</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nb">source</span> <span class="k">$(</span>pew shell_config<span class="k">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>save the file</li>
<li>Open terminal and run command <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">bash_profile</span></code></li>
</ol>
<p>Linux:
1. Add this line <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">$(pew</span> <span class="pre">shell_config)</span></code> to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> or <code class="docutils literal notranslate"><span class="pre">.zshrc</span></code></p>
</div>
<div class="section" id="powershell-prompt-configuration">
<h3>Powershell prompt configuration<a class="headerlink" href="#powershell-prompt-configuration" title="Permalink to this headline">¬∂</a></h3>
<ol class="arabic simple">
<li>Open <code class="docutils literal notranslate"><span class="pre">powershell</span></code></li>
<li>Run this command to create a profile: <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(!(Test-Path</span> <span class="pre">-Path</span> <span class="pre">$profile)){New-Item</span> <span class="pre">-ItemType</span> <span class="pre">File</span> <span class="pre">-Path</span> <span class="pre">$profile</span> <span class="pre">-Force}</span></code></li>
<li>Open the profile: <code class="docutils literal notranslate"><span class="pre">notepad</span> <span class="pre">$PROFILE</span></code></li>
<li>Insert following code and save the file. (From now on this code will be loaded everytime you open powershell)</li>
</ol>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="c"># customized prompt for python virtualenv</span>
<span class="k">function</span> <span class="n">prompt</span>
<span class="p">{</span>
    <span class="nv">$venv_prompt</span> <span class="p">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nv">$env:VIRTUAL_ENV</span> <span class="p">)</span> <span class="p">{</span>

        <span class="nv">$venv_name</span> <span class="p">=</span> <span class="p">(</span><span class="no">[System.IO.Path]</span><span class="p">::</span><span class="n">GetFileName</span><span class="p">(</span><span class="nv">$env:VIRTUAL_ENV</span><span class="p">))</span>
        <span class="nv">$venv_prompt</span> <span class="p">=</span> <span class="nb">Write-Host</span> <span class="n">-NoNewLine</span> <span class="o">-f</span> <span class="n">green</span> <span class="s2">&quot;($venv_name)&quot;</span>
    <span class="p">}</span>

    <span class="nb">Write-Host</span> <span class="p">(</span><span class="nv">$venv_prompt</span> <span class="p">+</span> <span class="s2">&quot;PS &quot;</span> <span class="p">+</span> <span class="s2">&quot;</span><span class="p">$(</span><span class="nb">get-location</span><span class="p">)</span><span class="s2">&quot;</span> <span class="p">+</span><span class="s2">&quot;&gt;&quot;</span><span class="p">)</span> <span class="n">-nonewline</span>
    <span class="k">return</span> <span class="s2">&quot; &quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple">
<li>Load the profile into current session so you do not have to reopen new window: <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">$PROFILE</span></code></li>
</ol>
</div>
</div>
<div class="section" id="pew">
<h2>pew<a class="headerlink" href="#pew" title="Permalink to this headline">¬∂</a></h2>
<blockquote>
<div><a class="reference external" href="https://github.com/berdario/pew">Pew - Python Env Wrapper</a> is a set of commands to manage multiple virtual environments.
Pew can create, delete and copy your environments, using a single command to switch to them wherever you are,
while keeping them in a single (configurable) location.</div></blockquote>
<p>Let‚Äôs start with pew.</p>
<ol class="arabic">
<li><p class="first">Open the terminal emulator.</p>
<ul class="simple">
<li>Mac OSx: hit <code class="docutils literal notranslate"><span class="pre">[CMD]+[Space]</span></code> and type <code class="docutils literal notranslate"><span class="pre">terminal.app</span></code></li>
<li>Windows: hit <code class="docutils literal notranslate"><span class="pre">[WIN-key]+[R]</span></code> and type <code class="docutils literal notranslate"><span class="pre">powershell</span></code> (or you can search for <code class="docutils literal notranslate"><span class="pre">powershell</span></code> in start menu.</li>
</ul>
</li>
<li><p class="first">To install pew use: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pew</span></code> (you might need to use <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pew</span></code> on Mac or linux.</p>
</li>
<li><p class="first">Once installed check if pew is working: <code class="docutils literal notranslate"><span class="pre">pew</span></code></p>
<ul class="simple">
<li>Command <code class="docutils literal notranslate"><span class="pre">pew</span></code> will list all available sub commands</li>
</ul>
</li>
<li><p class="first">Create a virtual environment: <code class="docutils literal notranslate"><span class="pre">pew</span> <span class="pre">new</span> <span class="pre">pew-env</span></code></p>
<ul class="simple">
<li>Command might ask you few things, asnwer is usually default so just hit <code class="docutils literal notranslate"><span class="pre">[Enter]</span></code></li>
<li>The output of the command above looks similar to this:</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Using base prefix &#39;/Library/Frameworks/Python.framework/Versions/3.6&#39;
New python executable in /Users/user/.virtualenvs/pew-env/bin/python3.6
Also creating executable in /Users/user/.virtualenvs/pew-env/bin/python
Installing setuptools, pip, wheel...done.
Launching subshell in virtual environment. Type &#39;exit&#39; or &#39;Ctrl+D&#39; to return.
pew-env user@machine:~$
</pre></div>
</div>
<ul class="simple">
<li>Virtual env should be active now and if you set your prompt correctly you should see something like this:<ul>
<li>Mac/Linux: <code class="docutils literal notranslate"><span class="pre">(.venv)</span> <span class="pre">user&#64;machine:</span> <span class="pre">&lt;path</span> <span class="pre">to</span> <span class="pre">task_venv&gt;</span></code></li>
<li>Windows: <code class="docutils literal notranslate"><span class="pre">(.venv)PS</span> <span class="pre">C:\&lt;path</span> <span class="pre">to</span> <span class="pre">task_venv&gt;</span></code></li>
</ul>
</li>
<li>Command usage: <code class="docutils literal notranslate"><span class="pre">pew</span> <span class="pre">new</span> <span class="pre">[venv</span> <span class="pre">name]</span></code></li>
<li>This will create new virtual environment in default directory <code class="docutils literal notranslate"><span class="pre">~/.virtualenvs</span></code> you can change the location by changing the environemnt variable <code class="docutils literal notranslate"><span class="pre">WORKON_HOME</span></code>,</li>
</ul>
</li>
<li><p class="first">Let‚Äôs check again path to virtual environment with command below.</p>
<ul class="simple">
<li>Mac/Linux: <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$VIRTUAL_ENV</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/Users/user/venv_task/.venv
</pre></div>
</div>
<ul class="simple">
<li>Windows: <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$env:VIRTUAL_ENV</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>C:\Users\user\venv_task\.venv
</pre></div>
</div>
</li>
<li><p class="first">Check that we are using <code class="docutils literal notranslate"><span class="pre">pip</span></code> and <code class="docutils literal notranslate"><span class="pre">python</span></code> directly from virtual environment,
note that the output should contain same root path as value of <code class="docutils literal notranslate"><span class="pre">$VIRTUAL_ENV</span></code>.
Try the commands below and examine the output.</p>
<ul class="simple">
<li>Mac/Linux: <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">pip</span></code>, <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">python</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/Users/user/venv_task/.venv/bin/pip
/Users/user/venv_task/.venv/bin/python
</pre></div>
</div>
<ul class="simple">
<li>Windows: <code class="docutils literal notranslate"><span class="pre">gcm</span> <span class="pre">pip</span></code>, <code class="docutils literal notranslate"><span class="pre">gcm</span> <span class="pre">python</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(pew-env)PS C:\Users\user&gt; gcm python

CommandType     Name                                               Version    Source
-----------     ----                                               -------    ------
Application     python.exe                                         3.6.315... C:\Users\user\.virtualenvs\Scripts\python.exe

(pew-env)PS C:\Users\user&gt; gcm pip

CommandType     Name                                               Version    Source
-----------     ----                                               -------    ------
Application     pip.exe                                            0.0.0.0    C:\Users\user\.virtualenvs\Scripts\pip.exe
</pre></div>
</div>
</li>
<li><p class="first">Let‚Äôs install <code class="docutils literal notranslate"><span class="pre">html5lib</span></code> into your virtual environment</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">html5lib</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">list</span></code> to show installed packages</li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>html5lib (1.0.1)
pip (9.0.3)
setuptools (39.0.1)
six (1.11.0)
webencodings (0.5.1)
wheel (0.31.0)
</pre></div>
</div>
</li>
<li><p class="first">To exit virtual environment use command: <code class="docutils literal notranslate"><span class="pre">exit</span></code></p>
</li>
<li><p class="first">List available virtual environments: <code class="docutils literal notranslate"><span class="pre">pew</span> <span class="pre">ls</span></code></p>
</li>
<li><p class="first">Remove virtual environemnent: <code class="docutils literal notranslate"><span class="pre">pew</span> <span class="pre">rm</span> <span class="pre">pew-env</span></code></p>
</li>
</ol>
</div>
<div class="section" id="pipenv">
<h2>Pipenv<a class="headerlink" href="#pipenv" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Python Dev Workflow for Humans</strong></p>
<p>Pipenv is the officially recommended Python packaging tool from <a class="reference external" href="https://packaging.python.org/tutorials/managing-dependencies/#managing-dependencies">Python.org</a> , free (as in freedom).
Pipenv aims to combine the functionality of <code class="docutils literal notranslate"><span class="pre">pip</span></code> and <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> in one tool.</p>
<p>The idea behind pipenv is to provide users and developers of applications with an easy method to setup a working environment.</p>
<p>Pipenv is using <code class="docutils literal notranslate"><span class="pre">pew</span></code> under the hood however it‚Äôs version might differ from pew‚Äôs official repository.
The main difference between <code class="docutils literal notranslate"><span class="pre">pipenv</span></code> and <code class="docutils literal notranslate"><span class="pre">pew`</span> <span class="pre">is</span> <span class="pre">that</span> <span class="pre">the</span> <span class="pre">project</span> <span class="pre">environment</span> <span class="pre">is</span> <span class="pre">created</span> <span class="pre">in</span> <span class="pre">current</span> <span class="pre">directory</span> <span class="pre">where</span> <span class="pre">``pipenv</span></code> creates <code class="docutils literal notranslate"><span class="pre">Pipfile</span></code>
which is used as main configuration file, for the project dependencies.
It is possible to specify practically anything you need.
Pipenv env also creates <code class="docutils literal notranslate"><span class="pre">Pipfile.lock</span></code> which is used to produce deterministic builds.</p>
<p>Pipenv also does not offer management (create/list/delete) of multiple virtual environments.
Virtual enviroment names are automatic based on project directory.
Pipenv provides additionaly functionality for dependency management.
Pipenv is using <a class="reference external" href="https://github.com/toml-lang/toml">TOML</a>!</p>
<p>For the distinction between libraries and applications and the usage of <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> vs <code class="docutils literal notranslate"><span class="pre">Pipfile</span></code> to define dependencies, see <a class="reference external" href="http://pipenv.readthedocs.io/en/latest/advanced/#pipfile-vs-setuppy">pipfile-vs-setuppy</a>.</p>
<p>Let‚Äôs try pipenv!</p>
<ol class="arabic">
<li><p class="first">Open the terminal emulator.</p>
<ul class="simple">
<li>Mac OSx: hit <code class="docutils literal notranslate"><span class="pre">[CMD]+[Space]</span></code> and type <code class="docutils literal notranslate"><span class="pre">terminal.app</span></code></li>
<li>Windows: hit <code class="docutils literal notranslate"><span class="pre">[WIN-key]+[R]</span></code> and type <code class="docutils literal notranslate"><span class="pre">powershell</span></code> (or you can search for <code class="docutils literal notranslate"><span class="pre">powershell</span></code> in start menu.</li>
</ul>
</li>
<li><p class="first">Install pipevn <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pipevn</span></code> (on Mac or Linux you might need to use <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pipenv</span></code>)</p>
</li>
<li><p class="first">Create our project directory <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">pipenv_task</span></code></p>
</li>
<li><p class="first">Go to our project directory <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">pipenv_task</span></code></p>
</li>
<li><p class="first">Initiate pipenv by installing the package <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">install</span> <span class="pre">html5lib==0.999</span></code></p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">install</span></code> accept same set of arguments as <a class="reference external" href="https://pip.pypa.io/en/stable/reference/pip_install/">pip install</a> + bit more, check <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">install</span> <span class="pre">-h</span></code> for more info</li>
</ul>
</li>
<li><p class="first">Install another package(<a class="reference external" href="https://docs.pytest.org/en/latest/contents.html">pytest</a>): <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">install</span> <span class="pre">-d</span> <span class="pre">ptpython</span> <span class="pre">pytest</span></code></p>
</li>
<li><p class="first">Check the information about virtual environemnt with <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">--venv</span></code></p>
<ul class="simple">
<li>As you can see the name of this virtual environment is <code class="docutils literal notranslate"><span class="pre">pipenv_task-srAOpT2k</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/Users/user/.virtualenvs/pipenv_task-srAOpT2k
</pre></div>
</div>
</li>
<li><p class="first">Check information about python installed in venv with <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">--py</span></code></p>
<ul class="simple">
<li>This will output path to python used:</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/Users/user/.virtualenvs/pipenv_task-srAOpT2k/bin/python
</pre></div>
</div>
</li>
<li><p class="first">List content of current directory</p>
<ul class="simple">
<li>LinuxMac: <code class="docutils literal notranslate"><span class="pre">ls</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Pipfile      Pipfile.lock
</pre></div>
</div>
<ul class="simple">
<li>Windows: <code class="docutils literal notranslate"><span class="pre">gci</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>PS C:\Users\user\pipenv_task&gt; gci


Directory: C:\Users\user\pipenv_task


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----        4/10/2018   4:08 PM            156 Pipfile
-a----        4/10/2018   4:08 PM            480 Pipfile.lock
</pre></div>
</div>
</li>
<li><p class="first">Let‚Äôs examinate the content of the <code class="docutils literal notranslate"><span class="pre">Pipfile</span></code>.</p>
<ul class="simple">
<li>LinuxMac: <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">Pipfile</span></code></li>
<li>Windows: <code class="docutils literal notranslate"><span class="pre">gc</span> <span class="pre">Pipfile</span></code></li>
<li>The content of the <code class="docutils literal notranslate"><span class="pre">Pipfile</span></code> looks similar to this, I added few comments</li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># The package index (from where pip installs packages)</span>
<span class="c1"># It is much easier now to define multiple package indexes</span>
<span class="k">[[source]]</span>
<span class="na">url</span> <span class="o">=</span> <span class="s">&quot;https://pypi.python.org/simple&quot;</span>
<span class="na">verify_ssl</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">&quot;pypi&quot;</span>

<span class="c1"># Packages needed for application run</span>
<span class="k">[packages]</span>
<span class="c1"># package with specific version</span>
<span class="na">&quot;html5lib&quot;</span> <span class="o">=</span> <span class="s">&quot;==0.9999&quot;</span>

<span class="c1"># Packages used only during application development</span>
<span class="k">[dev-packages]</span>
<span class="c1"># package with latest version</span>
<span class="na">ptpython</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span>
<span class="na">pytest</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span>

<span class="c1"># Required python versions for the application</span>
<span class="k">[requires]</span>
<span class="na">python_version</span> <span class="o">=</span> <span class="s">&quot;3.6&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li>There are many more <a class="reference external" href="https://github.com/pypa/pipfile">Pipfile configuration options</a></li>
</ul>
</li>
<li><p class="first">Check the content of <code class="docutils literal notranslate"><span class="pre">Pipfile.lock</span></code></p>
<ul class="simple">
<li>LinuxMac: <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">Pipfile.lock</span></code></li>
<li>Windows: <code class="docutils literal notranslate"><span class="pre">gc</span> <span class="pre">Pipfile.lock</span></code></li>
<li>As you can see <code class="docutils literal notranslate"><span class="pre">Pipfile.lock</span></code> is <code class="docutils literal notranslate"><span class="pre">JSON</span></code> file full of hashes, do not edit this file manually!</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
&quot;_meta&quot;: {
    &quot;hash&quot;: {
        &quot;sha256&quot;: &quot;ef0b8772299a7cc5547cc0dd08fa61232d4cea4be675b853d7fda1643e9e9aee&quot;
    },
    &quot;pipfile-spec&quot;: 6,
    &quot;requires&quot;: {
        &quot;python_version&quot;: &quot;3.6&quot;
    },
    &quot;sources&quot;: [
        {
            &quot;name&quot;: &quot;pypi&quot;,
            &quot;url&quot;: &quot;https://pypi.python.org/simple&quot;,
            &quot;verify_ssl&quot;: true
        }
    ]
},
&quot;default&quot;: {
    &quot;html5lib&quot;: {
        &quot;hashes&quot;: [
            &quot;sha256:c3887f7e2875d7666107fa8bee761ff95b9391acdcc7cd1b5fd57a23b5fbc49e&quot;
        ],
        &quot;index&quot;: &quot;pypi&quot;,
        &quot;version&quot;: &quot;==0.999&quot;
    },
....
</pre></div>
</div>
</li>
<li><p class="first">Pipenv provides checks for security vulnerabilities, run command to see the results: <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">check</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Checking PEP 508 requirements‚Ä¶
Passed!
Checking installed package safety‚Ä¶
25846: html5lib &lt;0.99999999 resolved (0.999 installed)!
html5lib before 0.99999999 is vulnerable to a XSS attack. Upgrading avoids the XSS bug potentially caused by serializer allowing attribute values to be escaped out of in old browser versions, changing the quote_attr_values option on serializer to take one of three values, &quot;always&quot; (the old True value), &quot;legacy&quot; (the new option,  and the new default), and &quot;spec&quot; (the old False value, and the old default).

35693: html5lib &lt;0.99999999 resolved (0.999 installed)!
The serializer in html5lib before 0.99999999 might allow remote attackers to conduct cross-site scripting (XSS) attacks by leveraging mishandling of the &lt; (less than) character in attribute values.

35694: html5lib &lt;0.99999999 resolved (0.999 installed)!
The serializer in html5lib before 0.99999999 might allow remote attackers to conduct cross-site scripting (XSS) attacks by leveraging mishandling of special characters in attribute values, a different vulnerability than CVE-2016-9909.
</pre></div>
</div>
</li>
<li><p class="first">Examine dependency tree of your installed packages with <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">graph</span></code></p>
<ul class="simple">
<li>In our case it looks similar to this, now it‚Äôs easy enough to find the dependencies.</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>html5lib==0.999
  - six [required: Any, installed: 1.11.0]
ptpython==0.41
  - docopt [required: Any, installed: 0.6.2]
  - jedi [required: &gt;=0.9.0, installed: 0.11.1]
    - parso [required: ==0.1.1, installed: 0.1.1]
  - prompt-toolkit [required: &gt;=1.0.14,&lt;2.0.0, installed: 1.0.15]
    - six [required: &gt;=1.9.0, installed: 1.11.0]
    - wcwidth [required: Any, installed: 0.1.7]
  - pygments [required: Any, installed: 2.2.0]
pytest==3.5.0
  - attrs [required: &gt;=17.4.0, installed: 17.4.0]
  - more-itertools [required: &gt;=4.0.0, installed: 4.1.0]
    - six [required: &gt;=1.0.0,&lt;2.0.0, installed: 1.11.0]
  - pluggy [required: &gt;=0.5,&lt;0.7, installed: 0.6.0]
  - py [required: &gt;=1.5.0, installed: 1.5.3]
  - setuptools [required: Any, installed: 39.0.1]
  - six [required: &gt;=1.10.0, installed: 1.11.0]
</pre></div>
</div>
</li>
<li><p class="first">You can also run commands inside virtual environment, try to compare results of these two commands:</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">run</span> <span class="pre">python</span> <span class="pre">-m</span> <span class="pre">site</span></code> - this command run python inside venv</li>
<li><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">site</span></code> - this command run python in your system</li>
</ol>
</li>
<li><p class="first">You can also use pipenv like other venvs and execute commands directly from the environment by using pipen shell,
To activate the shell use command: <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">shell</span></code></p>
</li>
<li><p class="first">You can list installed packages with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">list</span></code></p>
</li>
<li><p class="first">Let‚Äôs assume you would like to try some python package but you do not want to include it in project requirements yet.
While in the shell use <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pylint</span></code> - to install <a class="reference external" href="https://www.pylint.org">pylint</a></p>
</li>
<li><p class="first">Check the dependencies: <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">graph</span></code></p>
<ul class="simple">
<li>As you can see <a class="reference external" href="https://www.pylint.org">pylint</a> has also many dependencies and it would take more effort to remove them one by one.
Next step will show you how to clean up your environment.</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>html5lib==0.999
  - six [required: Any, installed: 1.11.0]
ptpython==0.41
  - docopt [required: Any, installed: 0.6.2]
  - jedi [required: &gt;=0.9.0, installed: 0.11.1]
    - parso [required: ==0.1.1, installed: 0.1.1]
  - prompt-toolkit [required: &lt;2.0.0,&gt;=1.0.14, installed: 1.0.15]
    - six [required: &gt;=1.9.0, installed: 1.11.0]
    - wcwidth [required: Any, installed: 0.1.7]
  - pygments [required: Any, installed: 2.2.0]
pylint==1.8.4
  - astroid [required: &gt;=1.6,&lt;2.0, installed: 1.6.3]
    - lazy-object-proxy [required: Any, installed: 1.3.1]
    - six [required: Any, installed: 1.11.0]
    - wrapt [required: Any, installed: 1.10.11]
  - isort [required: &gt;=4.2.5, installed: 4.3.4]
  - mccabe [required: Any, installed: 0.6.1]
  - six [required: Any, installed: 1.11.0]
pytest==3.5.0
  - attrs [required: &gt;=17.4.0, installed: 17.4.0]
  - more-itertools [required: &gt;=4.0.0, installed: 4.1.0]
    - six [required: &gt;=1.0.0,&lt;2.0.0, installed: 1.11.0]
  - pluggy [required: &gt;=0.5,&lt;0.7, installed: 0.6.0]
  - py [required: &gt;=1.5.0, installed: 1.5.3]
  - setuptools [required: Any, installed: 39.0.1]
  - six [required: &gt;=1.10.0, installed: 1.11.0]
</pre></div>
</div>
</li>
<li><p class="first">To cleanup your environment use the command: <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">clean</span></code> - This will remove all packages which are not specified in <code class="docutils literal notranslate"><span class="pre">Pipfile.lock</span></code></p>
<ul class="simple">
<li>You can run this command in or outside your pipenv shell</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Uninstalling &#39;astroid&#39;‚Ä¶
Uninstalling &#39;isort&#39;‚Ä¶
Uninstalling &#39;lazy-object-proxy&#39;‚Ä¶
Uninstalling &#39;mccabe&#39;‚Ä¶
Uninstalling &#39;pylint&#39;‚Ä¶
Uninstalling &#39;wrapt&#39;‚Ä¶
</pre></div>
</div>
</li>
<li><p class="first">To exit <strong>pipenv shell</strong> use command <code class="docutils literal notranslate"><span class="pre">exit</span></code></p>
</li>
<li><p class="first">We have been playing with our environment quite a lot, let‚Äôs throw it all away with command: <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">--rm</span></code></p>
<ul class="simple">
<li>The output of previous command.</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Removing virtualenv (/Users/user/.virtualenvs/pipenv_task-srAOpT2k)‚Ä¶
</pre></div>
</div>
</li>
<li><p class="first">Now we left with <code class="docutils literal notranslate"><span class="pre">Pipfile</span></code> and <code class="docutils literal notranslate"><span class="pre">Pipfile.lock</span></code> and we would like to install only production packages.
You can do this with command: <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">install</span></code></p>
<ul class="simple">
<li>This time pipenv searches for <code class="docutils literal notranslate"><span class="pre">Pipfile.lock</span></code> and install all dependencies from there:</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Installing dependencies from Pipfile.lock (9e9aee)‚Ä¶
  üêç   ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 2/2 ‚Äî 00:00:02
</pre></div>
</div>
<ul class="simple">
<li>In case you do not have your <code class="docutils literal notranslate"><span class="pre">Pipfile.lock</span></code>, you can generate it with command <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">lock</span></code></li>
<li>If do not even have virtual environment and project only contains <code class="docutils literal notranslate"><span class="pre">Pipfile</span></code>, you can still run <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">install</span></code>
- which creates <code class="docutils literal notranslate"><span class="pre">Pipfile.lock</span></code> and install all dependencies from there</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¬∂</a></h2>
<p>Now you have learned necessary basics of virtual environment management.
Chose the tool which suites you best and go ahead: play and develop.</p>
<p>My personal preference is to use combination of <code class="docutils literal notranslate"><span class="pre">pew</span></code> and <code class="docutils literal notranslate"><span class="pre">pipenv</span></code>, where I use <code class="docutils literal notranslate"><span class="pre">pipenv</span></code> for management inside project and <code class="docutils literal notranslate"><span class="pre">pew</span></code> to list and clean up forgotten virtual environments.</p>
</div>
<div class="section" id="references">
<span id="id1"></span><h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li><strong>venv</strong> documentation: <a class="reference external" href="https://docs.python.org/3/library/venv.html">https://docs.python.org/3/library/venv.html</a></li>
<li><strong>pew</strong> official repository: <a class="reference external" href="https://github.com/berdario/pew">https://github.com/berdario/pew</a></li>
<li><strong>pipenv</strong> documentation: <a class="reference external" href="https://pipenv.readthedocs.io/en/latest/">https://pipenv.readthedocs.io/en/latest/</a></li>
<li><strong>pipfile</strong> official repository: <a class="reference external" href="https://github.com/pypa/pipfile">https://github.com/pypa/pipfile</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Virtual environments</a><ul>
<li><a class="reference internal" href="#venv">venv</a></li>
<li><a class="reference internal" href="#necessary-customisations-for-pipenv-and-pew">Necessary customisations for pipenv and pew</a><ul>
<li><a class="reference internal" href="#bash-prompt-configuration">BASH prompt configuration</a></li>
<li><a class="reference internal" href="#powershell-prompt-configuration">Powershell prompt configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pew">pew</a></li>
<li><a class="reference internal" href="#pipenv">Pipenv</a></li>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../pip-lab/README.html"
                        title="previous chapter">pip Lab</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../python-shells/README.html"
                        title="next chapter">Python shells</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/python-virtual-environments/README.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../python-shells/README.html" title="Python shells"
             >next</a> |</li>
        <li class="right" >
          <a href="../pip-lab/README.html" title="pip Lab"
             >previous</a> |</li>
    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    
    <a href="../index.html">Python Workshops 0.1.0 documentation</a> &#187;
    

    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2018, Jan Gazda.
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Last updated on None.
    
    <br />

    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.7.2.
    </div>

  </body>
</html>